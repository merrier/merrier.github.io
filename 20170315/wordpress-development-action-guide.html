<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Merrier说">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://merrier.wang">
    <!--SEO-->

<meta name="description" content="Merrier的个人博客">



<meta name="keywords" content="">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
<meta name="google-site-verification" content="UkMBUrF2qTuMWfmPXWFFmc_pnqCRAxHQY1ndE0Zu1p0">


<link rel="apple-touch-icon" href="/images/hexo_others_10.png">

    <!--Title-->


<title>Wordpress开发行动指南 | Merrier说</title>


    <link rel="alternate" href="/atom.xml" title="Merrier说" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1264342320 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1264342320%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="Merrier">
            <img src="/images/hexo_others_8.jpeg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 叩首问路，码梦为生 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://merrier.wang">Merrier说</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa fa-home"></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/frontend/"><i class="fa fa-tablet"></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/summary/"><i class="fa fa-diamond"></i>总结</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/talk/"><i class="fa fa-coffee"></i>杂谈</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/series/"><i class="fa fa-shopping-cart"></i>系列专栏</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa fa-archive"></i>文章归档</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Wordpress开发行动指南">
            
	            Wordpress开发行动指南
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/Wordpress">
            Wordpress
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/指南" title="指南">
                        指南
                    </a>
                
                    <a href="/tags/Wordpress" title="Wordpress">
                        Wordpress
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2017/03/15</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <p>本人玩 Wordpress 到目前为止也只有 3 天，但是发现 Wordpress 是异常庞大的，可能在开发的过程中会遇到各种各样的 bug，同时也会运用到各种小技巧和“黑科技”，所以就索性写篇文章用来记录我在这个过程中的收获与教训吧。</p>
<h2 id="1-Wordpress-的插件"><a href="#1-Wordpress-的插件" class="headerlink" title="1. Wordpress 的插件"></a>1. Wordpress 的插件</h2><p>Wordpress 的插件使 Wordpress 的功能得到了无限扩展，所以想用 Wordpress 搭建网站或者开发插件的话，一定要多用它的插件，并且多了解一些插件的功能，其中我在做博客的过程中用到的一些好用的插件都在我的另一篇文章里了，可以点击查看 -&gt;：<a href="/20170314/wordpress-plugin-recommendation.html">Wordpress插件推荐</a></p>
<h2 id="2-自动为-WordPress-文章设置特色图像代码"><a href="#2-自动为-WordPress-文章设置特色图像代码" class="headerlink" title="2. 自动为 WordPress 文章设置特色图像代码"></a>2. 自动为 WordPress 文章设置特色图像代码</h2><p>这里有一段很实用的代码，可以自动将文章中的第一张图片设置为特色图像，如果你手动设置了特色图像，可以覆盖这段代码。将下面的代码丢到当前主题的 functions.php 里，以后就不用担心忘记设置特色图像了。（这个到底有什么用呢，反正我没用= =）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autoset_featured</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">global</span> $post;</span><br><span class="line">  $already_has_thumb = has_post_thumbnail($post-&gt;ID);</span><br><span class="line">  <span class="keyword">if</span> (!$already_has_thumb)  &#123;</span><br><span class="line">    $attached_image = get_children( <span class="string">"post_parent=$post-&gt;ID&amp;post_type=attachment&amp;post_mime_type=image&amp;numberposts=1"</span> );</span><br><span class="line">    <span class="keyword">if</span> ($attached_image) &#123;</span><br><span class="line">      <span class="keyword">foreach</span> ($attached_image <span class="keyword">as</span> $attachment_id =&gt; $attachment) &#123;</span><br><span class="line">        set_post_thumbnail($post-&gt;ID, $attachment_id);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  <span class="comment">//end function</span></span><br><span class="line">add_action(<span class="string">'the_post'</span>, <span class="string">'autoset_featured'</span>);</span><br><span class="line">add_action(<span class="string">'save_post'</span>, <span class="string">'autoset_featured'</span>);</span><br><span class="line">add_action(<span class="string">'draft_to_publish'</span>, <span class="string">'autoset_featured'</span>);</span><br><span class="line">add_action(<span class="string">'new_to_publish'</span>, <span class="string">'autoset_featured'</span>);</span><br><span class="line">add_action(<span class="string">'pending_to_publish'</span>, <span class="string">'autoset_featured'</span>);</span><br><span class="line">add_action(<span class="string">'future_to_publish'</span>, <span class="string">'autoset_featured'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-为某篇文章添加特定的样式或-js-代码"><a href="#3-为某篇文章添加特定的样式或-js-代码" class="headerlink" title="3. 为某篇文章添加特定的样式或 js 代码"></a>3. 为某篇文章添加特定的样式或 js 代码</h2><p>将下面代码添加到你的 WordPress 主题模板的 functions.php 中：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">为特定文章添加特定css最简单的方式.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*添加自定义CSS的meta box*/</span></span><br><span class="line">add_action(<span class="string">'admin_menu'</span>, <span class="string">'cwp_add_my_custom_css_meta_box'</span>);</span><br><span class="line"><span class="comment">/*保存自定义CSS的内容*/</span></span><br><span class="line">add_action(<span class="string">'save_post'</span>, <span class="string">'cwp_save_my_custom_css'</span>);</span><br><span class="line"><span class="comment">/*将自定义CSS添加到特定文章(适用于Wordpress中文章、页面、自定义文章类型等)的头部*/</span></span><br><span class="line">add_action(<span class="string">'wp_head'</span>,<span class="string">'cwp_insert_my_custom_css'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cwp_add_my_custom_css_meta_box</span><span class="params">()</span> </span>&#123;</span><br><span class="line">add_meta_box(<span class="string">'my_custom_css'</span>, <span class="string">'自定义CSS'</span>, <span class="string">'cwp_output_my_custom_css_input_fields'</span>, <span class="string">'post'</span>, <span class="string">'normal'</span>, <span class="string">'high'</span>);</span><br><span class="line">add_meta_box(<span class="string">'my_custom_css'</span>, <span class="string">'自定义CSS'</span>, <span class="string">'cwp_output_my_custom_css_input_fields'</span>, <span class="string">'page'</span>, <span class="string">'normal'</span>, <span class="string">'high'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cwp_output_my_custom_css_input_fields</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">global</span> $post;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'&lt;input type="hidden" name="my_custom_css_noncename" id="my_custom_css_noncename" value="'</span>.wp_create_nonce(<span class="string">'custom-css'</span>).<span class="string">'" /&gt;'</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'&lt;textarea name="my_custom_css" id="my_custom_css" rows="5" cols="30" style="width:100%;"&gt;'</span>.get_post_meta($post-&gt;ID,<span class="string">'_my_custom_css'</span>,<span class="keyword">true</span>).<span class="string">'&lt;/textarea&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cwp_save_my_custom_css</span><span class="params">($post_id)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!wp_verify_nonce($_POST[<span class="string">'my_custom_css_noncename'</span>], <span class="string">'custom-css'</span>)) <span class="keyword">return</span> $post_id;</span><br><span class="line">  <span class="keyword">if</span> (defined(<span class="string">'DOING_AUTOSAVE'</span>) &amp;&amp; DOING_AUTOSAVE) <span class="keyword">return</span> $post_id;</span><br><span class="line">  $my_custom_css = $_POST[<span class="string">'my_custom_css'</span>];</span><br><span class="line">  update_post_meta($post_id, <span class="string">'_my_custom_css'</span>, $my_custom_css);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cwp_insert_my_custom_css</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (is_page() || is_single()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (have_posts()) : <span class="keyword">while</span> (have_posts()) : the_post();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;style type="text/css"&gt;'</span>.get_post_meta(get_the_ID(), <span class="string">'_my_custom_css'</span>, <span class="keyword">true</span>).<span class="string">'&lt;/style&gt;'</span>;</span><br><span class="line">    <span class="keyword">endwhile</span>; <span class="keyword">endif</span>;</span><br><span class="line">    rewind_posts();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在文章的编辑页面就会出现如下输入框：</p>
<div align="center"><img src="/images/hexo_post_135.png" alt="" width="500"></div>

<p>它是在字数统计的下面，我一开始没注意到，以为没生效呢，差点就把这段代码否定了，不过这个方法只能用来定义特定 CSS 样式，如果想插入特定 js 代码的话，可以考虑用下面一个方法：</p>
<p>首先还是要将下面代码添加到你的 WordPress 主题模板的 functions.php 中</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add_action(<span class="string">"wp_head"</span>,<span class="string">"ruikeedu_custom_head"</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ruikeedu_custom_head</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (is_single() || is_page()) &#123;</span><br><span class="line">    <span class="keyword">global</span> $post;</span><br><span class="line">    $custom_head = get_post_meta($post-&gt;ID, <span class="string">'custom_head'</span>, <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">echo</span> $custom_head;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在文章的编辑页面设置显示自定义栏目：</p>
<div align="center"><img src="/images/hexo_post_136.png" alt="" width="700"></div>

<p>然后在文章编辑的后面会出现自定义栏目的输入框，名称为 custom_head，值就是你想插入的 css 代码或 js 代码（css 代码需要有 <code>&lt;style&gt;&lt;/style&gt;</code>，js 代码同理，因为该方法不会自动添加标签）</p>
<p>总结：网上虽然关于这个问题的回答很多，但是基本上都是抄来抄去，而且有的方法亲测不可用，所以推荐以上这两种方法一起用，既可以添加 css 代码又可以添加 js 代码。</p>
<h2 id="4-允许分类描述添加-html-代码"><a href="#4-允许分类描述添加-html-代码" class="headerlink" title="4. 允许分类描述添加 html 代码"></a>4. 允许分类描述添加 html 代码</h2><p>出于安全等因素考虑，WordPress 后台的文本框一般是不允许添加 html 代码的（也就是被过滤掉）。所以如果有 WP 用户需要在分类描述中添加 html 代码，下面这个实现方法就可以实现。直接将下面的代码添加到当前主题的 functions.php 文件即可：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 允许分类描述添加html代码</span></span><br><span class="line"><span class="comment"> * https://www.wpdaxue.com/category-description-support-html.html</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">remove_filter(<span class="string">'pre_term_description'</span>, <span class="string">'wp_filter_kses'</span>);</span><br><span class="line">remove_filter(<span class="string">'term_description'</span>, <span class="string">'wp_kses_data'</span>);</span><br></pre></td></tr></table></figure>
<p>如果你还想让 链接描述和备注、用户描述 也一样支持 html 代码，可以试试下面的代码，同样是添加到 functions.php：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Disables Kses only for textarea saves</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">array</span>(<span class="string">'pre_term_description'</span>, <span class="string">'pre_link_description'</span>, <span class="string">'pre_link_notes'</span>, <span class="string">'pre_user_description'</span>) <span class="keyword">as</span> $filter) &#123;</span><br><span class="line">  remove_filter($filter, <span class="string">'wp_filter_kses'</span>);</span><br><span class="line">&#125;<span class="comment">// Disables Kses only for textarea admin displays</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">array</span>(<span class="string">'term_description'</span>, <span class="string">'link_description'</span>, <span class="string">'link_notes'</span>, <span class="string">'user_description'</span>) <span class="keyword">as</span> $filter) &#123;</span><br><span class="line">  remove_filter($filter, <span class="string">'wp_kses_data'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你需要进一步了解实现原理，可以自己阅读以下文档：</p>
<ul>
<li><a href="http://codex.wordpress.org/Function_Reference/wp_filter_kses" target="_blank" rel="noopener">http://codex.wordpress.org/Function_Reference/wp_filter_kses</a></li>
<li><a href="http://codex.wordpress.org/Function_Reference/wp_kses_data" target="_blank" rel="noopener">http://codex.wordpress.org/Function_Reference/wp_kses_data</a></li>
</ul>
<h2 id="5-在文章中插入动图"><a href="#5-在文章中插入动图" class="headerlink" title="5. 在文章中插入动图"></a>5. 在文章中插入动图</h2><p>Wordpress 对于文章中的图片是默认进行缩略处理的，而文章中的 gif 动图在经过处理后就变成了静态文件，就不会“动”了，所以需要插入动图之后对其进行编辑，然后选择完整尺寸就可以了，如果在编辑文章时，该 gif 动图就已经“动”了起来，那证明已经成功了。</p>
<div align="center"><img src="/images/hexo_post_8.png" alt="" width="500"></div>

<h2 id="6-编辑文章上传图片时提示-HTTP-错误"><a href="#6-编辑文章上传图片时提示-HTTP-错误" class="headerlink" title="6.编辑文章上传图片时提示 HTTP 错误"></a>6.编辑文章上传图片时提示 HTTP 错误</h2><p>这个错误发生在我刚把项目从本地部署到服务器之后，然后我就上网搜了一下，有的人说是因为图片太长或太大了，但是我将图片压缩之后还是提示这个错误，所以又尝试了一些其他方法：</p>
<ol>
<li>如果使用的是服务器，那应该是安全设置问题，修改服务器的 httpd.conf 文件，删除里面关于 mod_security 部分就可以了</li>
<li>如果使用的是虚拟主机，在 .htaccess 文件里面加上一行（这个方法亲测有效）：</li>
</ol>
<blockquote>
<p>SetEnvIfNoCase Request_URI /wp-admin/async-upload.php$ MODSEC_ENABLE=Off</p>
</blockquote>
<ol start="3">
<li>如果上述方法都不能解决，有可能你的图片确实是太长或者太大了，还是压缩一下再上传试一下吧</li>
</ol>
<h2 id="7-更改新域名"><a href="#7-更改新域名" class="headerlink" title="7. 更改新域名"></a>7. 更改新域名</h2><p>这个问题的故事是这样的：因为想给自己的网站备案，所以就买了一个可以备案的域名 merrier.wang，而之前是 merrier.online，在买完域名并解析之后，在 Wordpress 后台将域名配置成 merrier.wang 之后就出现问题了，因为 merrier.wang 是没有备案的，所以就无法访问：</p>
<div align="center"><img src="/images/hexo_post_144.png" alt="" width="500"></div>

<p>但是访问之前的 merrier.online 又会重定向到 merrier.wang（应该是 Wordpress 自带的重定向），所以就相当于连后台也访问不了了，只能修改域名。在这里顺便提醒一下，如果你也给域名申请备案中，先不要在后台修改 Wordpress 的域名，因为备案不成功是访问不了的；接下来总结一下网上几种更改新域名的方法：</p>
<h3 id="方法一：修改-wp-config-php"><a href="#方法一：修改-wp-config-php" class="headerlink" title="方法一：修改 wp-config.php"></a>方法一：修改 wp-config.php</h3><p>在 wp-config.php 中，添加以下两行内容：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'WP_HOME'</span>,<span class="string">'http://yourwebsite'</span>);</span><br><span class="line">define(<span class="string">'WP_SITEURL'</span>,<span class="string">'http://yourwebsite'</span>);</span><br></pre></td></tr></table></figure>
<p>然后登录后台，在 “常规 -&gt; 设置”重新配置新博客地址（HOME）和安装地址（SITEURL），<strong>成功后一定记得删除上面添加的内容。</strong></p>
<h3 id="方法二：修改-functions-php"><a href="#方法二：修改-functions-php" class="headerlink" title="方法二：修改 functions.php"></a>方法二：修改 functions.php</h3><p>functions.php 位于当前博客主题目录内，在其中添加以下两行内容：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update_option(<span class="string">'siteurl'</span>,<span class="string">'http://yourwebsite'</span>);</span><br><span class="line">update_option(<span class="string">'home'</span>,<span class="string">'http://yourwebsite'</span>);</span><br></pre></td></tr></table></figure>
<p>然后登录后台，在 “常规 -&gt; 设置”重新配置新博客地址（HOME）和安装地址（SITEURL），<strong>成功后一定记得删除上面添加的内容。</strong></p>
<h3 id="方法三：修改-wp-config-php（自动更新地址）"><a href="#方法三：修改-wp-config-php（自动更新地址）" class="headerlink" title="方法三：修改 wp-config.php（自动更新地址）"></a>方法三：修改 wp-config.php（自动更新地址）</h3><p>在 wp-config.php 中，添加下面一行内容</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'RELOCATE'</span>,<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p>然后登录后台地址，WP 将自动更新安装地址（SITEURL），手动修改博客地址（HOME）地址即可，<strong>成功后一定要记得删除上面添加的内容</strong></p>
<h3 id="方法四：修改数据库"><a href="#方法四：修改数据库" class="headerlink" title="方法四：修改数据库"></a>方法四：修改数据库</h3><p>通过某些方法（phpmyadmin 等）登陆到数据库，找到 wp_options 表，将表中的 siteurl 和 home 字段修改为当前的新域名</p>
<h2 id="8-页面下开启评论框"><a href="#8-页面下开启评论框" class="headerlink" title="8.页面下开启评论框"></a>8.页面下开启评论框</h2><p>我在更新了一些页面（比如标签云、读者墙、网址导航）之后，发现这些页面下没有评论框，非常的不爽，就上网查了一下，然后大部分答案都是修改代码，我试了之后发现还是不行，后来在 <a href="http://tieba.baidu.com/p/2309858682" target="_blank" rel="noopener">wordpress吧</a>发现了问题出在了哪里：</p>
<p>首先，在后台的页面设置界面，显示讨论栏目：</p>
<div align="center"><img src="/images/hexo_post_145.png" alt="" width="700"></div>

<p>然后在文章的下面开启允许评论：</p>
<div align="center"><img src="/images/hexo_post_146.png" alt="" width="700"></div>

<p>经过这两个步骤之后刷新页面（别忘了更新），就会发现评论框出现了！</p>
<h2 id="9-Wordpress-后台安装主题或插件时需要-FTP-帐号怎么办"><a href="#9-Wordpress-后台安装主题或插件时需要-FTP-帐号怎么办" class="headerlink" title="9. Wordpress 后台安装主题或插件时需要 FTP 帐号怎么办"></a>9. Wordpress 后台安装主题或插件时需要 FTP 帐号怎么办</h2><p>在我把代码部署到服务器上之后发现在更新插件或者安装插件的时候需要输入 FTP 用户名和密码，去阿里云控制台也没有找到，所以就上网找了一些解决教程，试了一下下面的解决方法，实测有效：</p>
<p>主要原因是 Wordpress 主目录的权限所有者不属于 apache 造成的；</p>
<p>第一步：找到 apache 服务所使用的用户名和用户组，具体做法为打开终端，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux</span><br></pre></td></tr></table></figure>
<p>找到 <code>/usr/sbin/apach</code>（或 <code>/usr/sbin/httpd</code>）的用户名，它就是 apache 的所有者，我这里是 apache</p>
<p>第二步：终端输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown apache:apache -R /var/www/</span><br></pre></td></tr></table></figure>
<p>这里的 <code>/var/www/</code> 是我的 web 主目录也是 Wordpress 主目录；<br>好了，这样就 OK 了，再进入 Wordpress 后台安装主题和插件就不再需要 FTP 帐户和密码了！！</p>
<h2 id="10-WordPress-数据库及各表结构"><a href="#10-WordPress-数据库及各表结构" class="headerlink" title="10. WordPress 数据库及各表结构"></a>10. WordPress 数据库及各表结构</h2><p>转载自 <a href="http://blog.csdn.net/ppiao1970hank/article/details/6301812" target="_blank" rel="noopener">csdn</a>，相信知道这些数据表的结构之后，可以对自己的 Wordpress 网站进行更加个性化的设置，当然如果你的英文还可以的话，推荐 <a href="https://codex.wordpress.org/Database_Description#Table_Overview" target="_blank" rel="noopener">WordPress官方文档</a>，官方已经给出了比较详细的表格</p>
<h2 id="11-建立数据库连接时出错"><a href="#11-建立数据库连接时出错" class="headerlink" title="11. 建立数据库连接时出错"></a>11. 建立数据库连接时出错</h2><p>某一天，我心血来潮想搞个 https，结果刷新网页的时候发现显示“建立数据库连接时出错”，后来在服务器上重启 mysql 就没问题了= =。。</p>
<h2 id="12-升级至-HTTPS-时图片路径仍然为-HTTP"><a href="#12-升级至-HTTPS-时图片路径仍然为-HTTP" class="headerlink" title="12. 升级至 HTTPS 时图片路径仍然为 HTTP"></a>12. 升级至 HTTPS 时图片路径仍然为 HTTP</h2><p>前几天把网站升级至 HTTPS 了，不过随之而来的就是一堆 bug 报错，首先就是文章中的图片路径，仍然是 HTTP 的话浏览器会报 <code>Mixed Content</code> 错，但是我通过修改数据库的方式仍然不管用，后来不知不觉把两个插件禁用了，然后就好了，这两个插件就是七牛云的相关插件：<strong>WPJAM BASIC、WPJAM 七牛镜像存储</strong>，不过禁用掉之后就用不了七牛云了，后续有时间我再深入研究一下= =</p>
<h2 id="13-WordPress：基于-JWT-的身份验证"><a href="#13-WordPress：基于-JWT-的身份验证" class="headerlink" title="13. WordPress：基于 JWT 的身份验证"></a>13. WordPress：基于 JWT 的身份验证</h2><p>如果你想基于 WordPress 去创建前端 App 或者移动端 App，解决用户的身份验证可以使用 JWT 这种方法，它是一种基于 Token 的验证身份的方法。</p>

    </div>
    
        <div class="reward">
    <div class="reward-wrap">赏
        <div class="reward-box">
            
                <span class="reward-type">
                    <img class="alipay" src="/images/hexo_others_5.png"><b>支付宝打赏</b>
                </span>
            
            
                <span class="reward-type">
                    <img class="wechat" src="/images/hexo_others_6.png"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">听说赞过就能年薪百万</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="//merrier.wang" target="_blank">Merrier说</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/20170317/game-experience-and-pseudo-strategy.html" class="pre-post btn btn-default" title="游戏心得&伪攻略">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">游戏心得&伪攻略</span>
        </a>
    
    
        <a href="/20170315/recommendation-of-excellent-front-end-plugins.html" class="next-post btn btn-default" title="前端优秀插件推荐">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">前端优秀插件推荐</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://merrier.disqus.com/count.js" async></script>


<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<script type="text/javascript">
  if (document.getElementById('disqus_thread')) {
    var disqus_config = function () {
      this.page.url = 'http://merrier.wang/20170315/wordpress-development-action-guide.html';
      this.page.identifier = '20170315/wordpress-development-action-guide.html';
      this.page.title = 'Wordpress开发行动指南';
    };
    (function(){
      var d = document,
          s = d.createElement('script');
      s.async = true;
      s.src = 'https://merrier.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
</script>




    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Wordpress-的插件"><span class="toc-text">1. Wordpress 的插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-自动为-WordPress-文章设置特色图像代码"><span class="toc-text">2. 自动为 WordPress 文章设置特色图像代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-为某篇文章添加特定的样式或-js-代码"><span class="toc-text">3. 为某篇文章添加特定的样式或 js 代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-允许分类描述添加-html-代码"><span class="toc-text">4. 允许分类描述添加 html 代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-在文章中插入动图"><span class="toc-text">5. 在文章中插入动图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-编辑文章上传图片时提示-HTTP-错误"><span class="toc-text">6.编辑文章上传图片时提示 HTTP 错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-更改新域名"><span class="toc-text">7. 更改新域名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#方法一：修改-wp-config-php"><span class="toc-text">方法一：修改 wp-config.php</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法二：修改-functions-php"><span class="toc-text">方法二：修改 functions.php</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法三：修改-wp-config-php（自动更新地址）"><span class="toc-text">方法三：修改 wp-config.php（自动更新地址）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法四：修改数据库"><span class="toc-text">方法四：修改数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-页面下开启评论框"><span class="toc-text">8.页面下开启评论框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Wordpress-后台安装主题或插件时需要-FTP-帐号怎么办"><span class="toc-text">9. Wordpress 后台安装主题或插件时需要 FTP 帐号怎么办</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-WordPress-数据库及各表结构"><span class="toc-text">10. WordPress 数据库及各表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-建立数据库连接时出错"><span class="toc-text">11. 建立数据库连接时出错</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-升级至-HTTPS-时图片路径仍然为-HTTP"><span class="toc-text">12. 升级至 HTTPS 时图片路径仍然为 HTTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-WordPress：基于-JWT-的身份验证"><span class="toc-text">13. WordPress：基于 JWT 的身份验证</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>




    <script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: '#444', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '#FFDAB9', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: true || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>