!function(){function e(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}function t(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function n(e,n){t(e,n)||(e.className+=" "+n)}function i(e,n){if(t(e,n)){var i=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(i," ")}}function o(e,t){return r(e.title,t)||r(e.text,t)}function r(e,t){return t.lastIndex=0,t.test(e)}function c(){i(v,"hide"),i(g,"hide")}function s(){n(v,"hide"),n(g,"hide")}function u(e){if(m)e(m);else{var t=new XMLHttpRequest;t.open("GET","/content.json",!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);m=t instanceof Array?t:t.posts,e(m)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}function a(t){var n="";t.length?n=t.map(function(t){return e(w,{title:d(t.title,"title"),path:t.path,content:d(t.text,"content")})}).join(""):""==p.value?s():n='<div class="tips"><p>没有找到相关结果!</p></div>',y.innerHTML=n}function d(e,t){var n=p.value,i=e.indexOf(n),o=e.replace(n,"<b>"+n+"</b>");return"title"==t?o:"content"==t&&i>0?o.substr(i-15,45):void 0}function l(e){var t=this.value.trim();if(!t)return void a("");var n=new RegExp(t.replace(/[ ]/g,"|"),"gmi");u(function(e){a(e.filter(function(e){return o(e,n)}))}),e.preventDefault(),c(),p.onfocus=function(){c()}}var f,h,m,p=document.getElementById("search-key"),g=(document.getElementById("search-local"),document.getElementById("search-form"),document.getElementById("result-mask")),v=document.getElementById("result-wrap"),y=document.getElementById("search-result"),w=document.getElementById("search-tpl").innerHTML;window.innerWidth?f=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(f=parseInt(document.body.clientWidth)),window.innerHeight?h=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(h=parseInt(document.body.clientHeight)),g.style.width=f+"px",g.style.height=h+"px",p.onfocus=function(){p.addEventListener("input",l)},g.onclick=function(){s()}}();