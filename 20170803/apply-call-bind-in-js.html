<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Merrier说">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://merrier.wang">
    <!--SEO-->

<meta name="description" content="Merrier的个人博客">



<meta name="keywords" content="merrier 博客 前端 北邮人">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
<meta name="google-site-verification" content="UkMBUrF2qTuMWfmPXWFFmc_pnqCRAxHQY1ndE0Zu1p0">
    <!--Title-->


<title>JS中的apply、call和bind | Merrier说</title>


    <link rel="alternate" href="/atom.xml" title="Merrier说" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1264342320 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1264342320%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="Merrier">
            <img src="/images/hexo_others_8.jpeg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 叩首问路，码梦为生 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://merrier.wang">Merrier说</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/frontend/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/algorithm/"><i class="fa "></i>算法</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/series/"><i class="fa "></i>系列专栏</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>文章归档</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="JS中的apply、call和bind">
            
	            JS中的apply、call和bind
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/JS">
            JS
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/JS" title="JS">
                        JS
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2017/08/03</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <p>关于JS中的apply、call和bind，网上的相关文章实在是太多了，但是对于我这种比较重视基础的人来说，感觉大部分文章都讲不到点子上，不不乏无脑复制粘贴之辈，所以我在参考了一些资料之后，决定用比较容易理解的方式来讲解，同时会用更多的实例来说明它们之间的区别。</p>
<h1 id="为什么会有它们仨"><a href="#为什么会有它们仨" class="headerlink" title="为什么会有它们仨"></a>为什么会有它们仨</h1><p>首先，哲学中有一句话：</p>
<blockquote>
<p>存在即合理</p>
</blockquote>
<p>所以，JS中为什么会有它们仨呢？让我们来一看一段代码：</p>
<p>function cat(){<br>}<br>cat.prototype={<br>    food:”fish”,<br>    say: function(){<br>    alert(“I love “+this.food);<br>    }<br>}<br>var blackCat = new cat;<br>blackCat.say();</p>
<p>这段代码很简单，也是我们经常会碰到的，就是我们定义了一个cat类，然后blackCat是cat类的一个实例，cat类有一个say方法。那么问题来了，如果我们又有一个对象叫做whiteDog={food:”bone”}，我们想让whiteDog也有cat类的say方法，那应该怎么办呢？所以这时候就体验出它们仨的作用了，我们可以通过下面的方式让whiteDog也有say方法：</p>
<ul>
<li>blackCat.say.call(whiteDog)</li>
<li>blackCat.say.apply(whiteDog)</li>
<li>blackCat.say.bind(whiteDog)()</li>
</ul>
<p>通过上面这个“猫与狗”的栗子，我们可以总结出apply、call和bind的共同点，就是它们都是为了改变函数体内部this的指向，也就是为了改变某个函数运行时的上下文（context）而存在的（JavaScript的函数存在【定义时上下文】、【运行时上下文】和【上下文是可以改变的】这样的概念，具体参见简书-波同学的文章：<a href="http://www.jianshu.com/p/a6d37c77e8db" target="_blank" rel="noopener">前端基础进阶（二）：执行上下文详细图解</a>）</p>
<h1 id="bind的独特性"><a href="#bind的独特性" class="headerlink" title="bind的独特性"></a>bind的独特性</h1><p>通过上面的调用方式你可能发现了一些端倪，就是bind在调用之后还需要加一个“()”，这就是call、apply它们和bind的区别了：</p>
<ul>
<li>只传一个参数时，call和apply都是对函数的直接调用</li>
<li>而bind方法返回的仍然是一个函数，因此后面还需要()来进行调用才可以</li>
</ul>
<p>也许你又有疑问了，一般我们的方法都会有参数的，如果有参数的话应该如何调用呢？我们再举个栗子：</p>
<p>var obj1 = {<br>  name: ‘asd’,<br>  age: 29 ,<br>  sayname: function(i, j){<br>    console.log( this.name + ‘是’ + this.age+i+j);<br>    }<br>  }</p>
<p>var obj2 ={<br>  name:’aaa’,<br>  age:30<br>}<br>obj1.sayname.apply(obj2,[‘男’,180]);<br>obj1.sayname.call(obj2,’女’,167);<br>obj1.sayname.bind(obj2,’x’,150)();<br>obj1.sayname.bind(obj2)(‘y’,110);</p>
<p>根据上面的代码，我们可以直观的总结出如下几个知识点：</p>
<ul>
<li>call后面的参数与sayname方法中是一一对应的</li>
<li>apply的第二个参数是一个数组，数组中的元素是和sayname方法中一一对应的（<strong>这其实就是和call最大的区别</strong>）</li>
<li>bind可以像call那样传参，但是由于bind返回的仍然是一个函数，还可以在调用的时候再进行传参</li>
</ul>
<h1 id="apply、call的区别"><a href="#apply、call的区别" class="headerlink" title="apply、call的区别"></a>apply、call的区别</h1><p>通过上面的栗子，我们可以看到，bind和apply、call是有本质上的区别的，所以我们先讲apply和call这一对“近亲”。对于apply、call 二者而言，作用完全一样，只是接受参数的方式不太一样。例如，有一个函数定义如下：</p>
<p>var func = function(arg1, arg2) {<br>    console.log(arg1 + arg2);<br>};</p>
<p>我们可以通过如下方式来调用：</p>
<ul>
<li>func.call(this, arg1, arg2);</li>
<li>func.apply(this, [arg1, arg2]);</li>
</ul>
<p>其中this是你想指定的上下文，它可以是任何一个JavaScript对象，而不同点在于：call需要把参数按顺序传递进去，而apply则是把参数放在数组里。 因此，如果你的参数明确知道数量的话，就用call。而不确定的时候用apply，然后把参数push进数组再传递进去。当参数数量不确定时，函数内部也可以通过arguments这个伪数组来遍历所有的参数，所以也有人用一句话区分apply和call： foo.call(this, arg1, arg2, arg3) == foo.apply(this, arguments) == this.foo(arg1, arg2, arg3)</p>
<h3 id="举个栗子"><a href="#举个栗子" class="headerlink" title="举个栗子"></a>举个栗子</h3><p>JS中存在一种名为伪数组的对象结构，比较特别的是arguments对象，还有像调用getElementsByTagName，document.childNodes之类的，它们返回NodeList对象都属于<strong>伪数组（也有文章描述这类对象为“类数组对象”）</strong>，不能应用Array下的push，pop等方法。但是我们能够通过Array.prototype.slice.call将带有length属性的对象转换为真正的数组，这样domNodes就可以应用Array下的所有方法了。</p>
<h1 id="一道面试题"><a href="#一道面试题" class="headerlink" title="一道面试题"></a>一道面试题</h1><p>可能你还是不太理解上面的“当参数数量不确定时，函数内部也可以通过arguments这个伪数组来遍历所有的参数”这句话，下面通过一道面试题，来更深入的理解apply和call：</p>
<p>//我们定义一个log方法，让它可以代理console.log方法<br>function log(msg)　{<br>  console.log(msg);<br>}<br>log(1);    //1<br>log(1,2);    //1</p>
<p>上面定义的方法可以解决最基本的需求，但是有一个问题在于：当传入参数的个数是不确定的时候，上面的方法就失效了。这个时候，因为传入多少个参数是不确定的，所以使用apply：</p>
<p>function log(){<br>  console.log.apply(console, arguments);<br>};<br>log(1);    //1<br>log(1,2);    //1 2</p>
<p>接下来我们又有一个需求，就是给每一个log信息添加一个“(app)”的前缀，比如</p>
<p>log(“hello world”);    //(app)hello world</p>
<p>我们该如何实现呢？这个时候需要想到arguments参数是个伪数组，通过 Array.prototype.slice.call 转化为标准数组，再使用数组方法unshift，像这样：</p>
<p>function log(){<br>  var args = Array.prototype.slice.call(arguments);<br>  args.unshift(‘(app)’);<br>  console.log.apply(console, args);<br>};</p>
<h1 id="bind详解"><a href="#bind详解" class="headerlink" title="bind详解"></a>bind详解</h1><p>apply和call就介绍完了，下面我们再介绍一下有些特殊的bind。MDN上对于bind的解释是：</p>
<blockquote>
<p>bind()方法会创建一个新函数，称为绑定函数，当调用这个绑定函数时，绑定函数会以创建它时传入 bind()方法的第一个参数作为 this，传入 bind() 方法的第二个以及以后的参数加上绑定函数运行时本身的参数按照顺序作为原函数的参数来调用原函数。</p>
</blockquote>
<p>我表示看完还是不懂，所以还是直接看实例来的痛快： 在常见的单例模式中，通常我们会使用 _this , that , self 等保存 this ，这样我们可以在改变了上下文之后继续引用到它。 像这样：</p>
<p>var foo = {<br>    bar : 1,<br>    eventBind: function(){<br>        var _this = this;<br>        $(‘.someClass’).on(‘click’,function(event) {<br>            console.log(_this.bar);     //1<br>        });<br>    }<br>}</p>
<p>由于 Javascript 特有的机制，上下文环境在 eventBind: function(){ } 过渡到 $(‘.someClass’).on(‘click’,function(event) { }) 发生了改变，上述使用变量保存 this 这些方式都是有用的，也没有什么问题。当然使用 bind() 可以更加优雅的解决这个问题：</p>
<p>var foo = {<br>    bar : 1,<br>    eventBind: function(){<br>        $(‘.someClass’).on(‘click’,function(event) {<br>            console.log(this.bar);      //1<br>        }.bind(this));<br>    }<br>}</p>
<p>在上述代码里，bind() 创建了一个函数，当这个click事件绑定在被调用的时候，它的 this 关键词会被设置成被传入的值（这里指调用bind()时传入的参数）。因此，这里我们传入想要的上下文 this(其实就是 foo )，到 bind() 函数中。然后，当回调函数被执行的时候， this 便指向 foo 对象。</p>
<h3 id="再来一个简单的栗子："><a href="#再来一个简单的栗子：" class="headerlink" title="再来一个简单的栗子："></a>再来一个简单的栗子：</h3><p>var bar = function(){<br>    console.log(this.x);<br>}<br>var foo = {<br>    x:3<br>}<br>bar(); // undefined<br>var func = bar.bind(foo);<br>func(); // 3</p>
<p>这里我们创建了一个新的函数 func，当使用 bind() 创建一个绑定函数之后，它被执行的时候，它的 this 会被设置成 foo ， 而不是像我们调用 bar() 时的全局作用域。</p>
<h2 id="连续bind"><a href="#连续bind" class="headerlink" title="连续bind()"></a>连续bind()</h2><p>有个有趣的问题，如果连续 bind() 两次，亦或者是连续 bind() 三次那么输出的值是什么呢？像这样：</p>
<p>var bar = function(){<br>    console.log(this.x);<br>}<br>var foo = {<br>    x:3<br>}<br>var sed = {<br>    x:4<br>}<br>var func = bar.bind(foo).bind(sed);<br>func(); //?</p>
<p>var fiv = {<br>    x:5<br>}<br>var func = bar.bind(foo).bind(sed).bind(fiv);<br>func(); //?</p>
<p>答案是，两次都仍将输出 3 ，而非期待中的 4 和 5 。原因是，在Javascript中，多次 bind() 是无效的。更深层次的原因， bind() 的实现，相当于使用函数在内部包了一个 call / apply ，第二次 bind() 相当于再包住第一次 bind() ,故第二次以后的 bind 是无法生效的。</p>
<h1 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h1><p>最近发现“总结一下”很好用，因为可以堂而皇之的给自己的文章增加很多篇幅，同时还可以显得高大上：</p>
<ul>
<li><strong>apply 、 call 、bind 三者都是用来改变函数的this对象的指向的；</strong></li>
<li><strong>apply 、 call 、bind 三者第一个参数都是this要指向的对象，也就是想指定的上下文；</strong></li>
<li><strong>apply 、 call 、bind 三者都可以利用后续参数传参；</strong></li>
<li><strong>bind 是返回对应函数，便于稍后调用；apply 、call 则是立即调用。</strong></li>
</ul>
<h5 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h5><p><a href="http://www.cnblogs.com/coco1s/p/4833199.html" target="_blank" rel="noopener">【优雅代码】深入浅出 妙用Javascript中apply、call、bind</a> <a href="http://www.jianshu.com/p/f17a7b5efc5d" target="_blank" rel="noopener">javascript call apply bind this指向和区别</a> <a href="http://www.cnblogs.com/fighting_cp/archive/2010/09/20/1831844.html" target="_blank" rel="noopener">关于javascript中apply()和call()方法的区别</a> <a href="https://www.zhihu.com/question/20289071" target="_blank" rel="noopener">如何理解和熟练运用js中的call及apply？</a> <a href="https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply" target="_blank" rel="noopener">What is the difference between call and apply?</a></p>

    </div>
    
        <div class="reward">
    <div class="reward-wrap">赏
        <div class="reward-box">
            
                <span class="reward-type">
                    <img class="alipay" src="/images/hexo_others_5.png"><b>支付宝打赏</b>
                </span>
            
            
                <span class="reward-type">
                    <img class="wechat" src="/images/hexo_others_6.png"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">赞赏是不耍流氓的鼓励</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="//merrier.wang" target="_blank">Merrier说</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/20170803/jquery-event-stop-using-return-false.html" class="pre-post btn btn-default" title="jQuery事件：不要再(滥)用return false了">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">jQuery事件：不要再(滥)用return false了</span>
        </a>
    
    
        <a href="/20170803/understanding-memory-allocation-in-js.html" class="next-post btn btn-default" title="理解JS中的内存分配">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">理解JS中的内存分配</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://merrier.disqus.com/count.js" async></script>


<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<script type="text/javascript">
  if (document.getElementById('disqus_thread')) {
    var disqus_config = function () {
      this.page.url = 'http://merrier.wang/20170803/apply-call-bind-in-js.html';
      this.page.identifier = '20170803/apply-call-bind-in-js.html';
      this.page.title = 'JS中的apply、call和bind';
    };
    (function(){
      var d = document,
          s = d.createElement('script');
      s.async = true;
      s.src = 'https://merrier.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
</script>




    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#为什么会有它们仨"><span class="toc-text">为什么会有它们仨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bind的独特性"><span class="toc-text">bind的独特性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#apply、call的区别"><span class="toc-text">apply、call的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#举个栗子"><span class="toc-text">举个栗子</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#一道面试题"><span class="toc-text">一道面试题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bind详解"><span class="toc-text">bind详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#再来一个简单的栗子："><span class="toc-text">再来一个简单的栗子：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#连续bind"><span class="toc-text">连续bind()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结一下"><span class="toc-text">总结一下</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#参考文章"><span class="toc-text">参考文章</span></a></li></ol></li>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>




    <script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: '#444', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '#FFDAB9', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: true || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>