<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Merrier说">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://merrier.wang">
    <!--SEO-->

<meta name="description" content="Merrier的个人博客">



<meta name="keywords" content="merrier 博客 前端 北邮人">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>实战中踩到的坑 | Merrier说</title>


    <link rel="alternate" href="/atom.xml" title="Merrier说" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1264342320 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1264342320%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="Merrier">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 叩首问路，码梦为生 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://merrier.wang">Merrier说</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/frontend/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/algorithm/"><i class="fa "></i>算法</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/series/"><i class="fa "></i>系列专栏</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>文章归档</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="实战中踩到的坑">
            
	            实战中踩到的坑
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/笔记">
            笔记
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/笔记" title="笔记">
                        笔记
                    </a>
                
                    <a href="/tags/技巧" title="技巧">
                        技巧
                    </a>
                
                    <a href="/tags/前端" title="前端">
                        前端
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2017/06/16</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h1 id="变量与选择器"><a href="#变量与选择器" class="headerlink" title="变量与选择器"></a>变量与选择器</h1><p>需求是这样的，类似于标签页，当我点击某个tab时需要显示对应的content，同时将其他content隐藏，所以一般都会这样写：</p>
<p>var ip = $(this).parents(“.tab”).attr(“data-ip”);</p>
<p>$(“.content”).find(“.content-item[data-ip=” + ip + “]“).show().siblings().hide();</p>
<p>理论上这样写是没有问题的，但是如果你的ip从后台传过来的时候是以数字的形式传过来的话，在页面中展示是没有问题的，但是获取之后再用上面这种方法就会找不到该元素，原因就是如果没有变量的话，选择器是这样的$(“.content-item[data-ip=’1000’]“),也就是说data-ip一定要是个字符串，所以在用上面那种形式定位的时候，JS会先判断你的ip变量是否是字符串类型，如果不是就直接报错；所以正确的写法是强行加一对单引号’ ‘在ip变量周围：$(“.content-item[data-ip=’” + ip + “‘ ]“)（注意单引号的位置）</p>
<h1 id="video无法播放"><a href="#video无法播放" class="headerlink" title="video无法播放"></a>video无法播放</h1><p>video作为h5新增的标签，自然问题不少，但是在开发的过程中遇到了之前从来没有遇到过的问题（之前也用的比较少），就是video无法播放的问题，经过排查，src的路径是正确的，其他参数该有的都有，但是仍然无法播放，经过向前辈们请教，才发现新大陆：</p>
<h2 id="1-video和audio都有跨域问题"><a href="#1-video和audio都有跨域问题" class="headerlink" title="1.video和audio都有跨域问题"></a>1.video和audio都有跨域问题</h2><p>可以看一下<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video" target="_blank" rel="noopener">MDN的这篇文章</a>，重点看一下crossorigin属性</p>
<h2 id="2-video中的src地址有猫腻"><a href="#2-video中的src地址有猫腻" class="headerlink" title="2.video中的src地址有猫腻"></a>2.video中的src地址有猫腻</h2><p>解决完跨域问题之后，发现仍然无法播放，所以就咨询了一下前辈，前辈看了一下我的video标签的src属性就发现了问题所在，因为有些网站为了自己的资源不被“非法人员”引用，同时也是为了节省自己网站流量，就会在自己视频的链接地址中加一些安全内容，比如signature、cookie相关代码，或者时间戳等常见保护措施，从而导致其他不在他“白名单”中的网站是没办法将他网站的视频加入到自己网站上的，所以就会出现无法正常播放的问题，解决方案很简单：联系视频来源网站或者换一家网站的视频</p>
<h1 id="django模板中的数组索引"><a href="#django模板中的数组索引" class="headerlink" title="django模板中的数组索引"></a>django模板中的数组索引</h1><p>django作为一个比较简单的前端web框架，其本身的template提供了很多功能，如变量、标签、过滤等，但是我在前端模板中想要通过索引获取数组中某一项时却遇到了麻烦，比如后来render的时候传给前端一个数组array，我想取得array的第一项，大部分语言可以通过array[0]获取到，然而在django中却报错：template syntex error；后来查阅了一些资料之后才知道，django模板中的数组索引需要用小数点.来进行查找（array.0），援引<a href="http://blog.csdn.net/zhangxinrun/article/details/8095118" target="_blank" rel="noopener">Django模板系统</a>中的解释，当模板系统遇到变量名里有小数点时会按以下顺序查找：</p>
<ol>
<li><strong>字典</strong>查找，如<strong>foo[“bar”]</strong></li>
<li><strong>属性</strong>查找，如<strong>foo.bar</strong></li>
<li><strong>方法</strong>调用，如<strong>foo.bar()</strong></li>
<li>列表的<strong>索引</strong>查找，如<strong>foo[bar]</strong></li>
</ol>
<p>小数点可以<strong>多级纵深查询</strong>，例如{ { person.name.upper }}表示字典查询person[‘name’]然后调用upper()方法；也就是说，<strong>在django模板中是不存在”[]“的，小数点.可以达到各种你想要的结果！</strong></p>
<h1 id="jsonp不是万能的"><a href="#jsonp不是万能的" class="headerlink" title="jsonp不是万能的"></a>jsonp不是万能的</h1><p>比如我现在页面的url是<a href="https://toutiao.com/...，然后我需要向www.toutiao.com请求数据，理论上这应该属于跨域，所以就需要设置ajax的dataType为jsonp类型，然后请求并没有发送成功，这是为什么呢？因为虽然当前页面的域名是toutiao.com，但是其实服务器已经做了重定向（301到了www.toutiao.com），所以如果向www.toutiao.com请求数据是不会跨域的，dataType改为json就可以了；但是有时候即便没有跨域，dataType设置为jsonp也是可以的，这又是为什么呢？因为看后台配不配合了，因为jsonp是需要前端和后端约定好jsonp的callback的，所以稳妥起见：**如果没有跨域，就不要用jsonp了！*" target="_blank" rel="noopener">https://toutiao.com/...，然后我需要向www.toutiao.com请求数据，理论上这应该属于跨域，所以就需要设置ajax的dataType为jsonp类型，然后请求并没有发送成功，这是为什么呢？因为虽然当前页面的域名是toutiao.com，但是其实服务器已经做了重定向（301到了www.toutiao.com），所以如果向www.toutiao.com请求数据是不会跨域的，dataType改为json就可以了；但是有时候即便没有跨域，dataType设置为jsonp也是可以的，这又是为什么呢？因为看后台配不配合了，因为jsonp是需要前端和后端约定好jsonp的callback的，所以稳妥起见：**如果没有跨域，就不要用jsonp了！*</a>*</p>
<h1 id="移动端慎用tap"><a href="#移动端慎用tap" class="headerlink" title="移动端慎用tap"></a>移动端慎用tap</h1><p>做过移动端的前端同学可能会知道，zepto对于移动端封装了一个独特的事件叫做tap，其行为特点和平常我们经常用到的click差不多，只不过tap更强调是“手指按一下屏幕而不是划过”，而click在移动端也会有延迟的问题，但是我在项目中遇到一个很坑的问题是：给一个元素绑定了tap事件，但是我按一下就会触发两次事件。后来把tap换成click（移动端也可以用click）之后就没有再出现这个问题了，所以如果你今后在开发移动端项目的时候碰到了tap事件，一定要谨慎啊！（后来查资料得知，有一个叫做<a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener">fastclick</a>的插件可以解决click在移动端上的延迟问题，如果你对用户体验要求苛刻同时又想避免tap的“点透”问题，可以尝试一下这个插件） 推荐文章：<a href="http://www.jianshu.com/p/19eebc1921b6" target="_blank" rel="noopener">移动端web，tap与click事件</a></p>
<h1 id="ant-design-select问题"><a href="#ant-design-select问题" class="headerlink" title="ant design select问题"></a>ant design select问题</h1><p><a href="https://github.com/ant-design/ant-design/issues/4832" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/issues/4832</a></p>
<h1 id="Object属性遍历问题"><a href="#Object属性遍历问题" class="headerlink" title="Object属性遍历问题"></a>Object属性遍历问题</h1><p><a href="http://jartto.wang/2016/10/25/does-js-guarantee-object-property-order/" target="_blank" rel="noopener">http://jartto.wang/2016/10/25/does-js-guarantee-object-property-order/</a></p>
<h1 id="IOS-Javascript-Date的坑"><a href="#IOS-Javascript-Date的坑" class="headerlink" title="IOS Javascript Date的坑"></a>IOS Javascript Date的坑</h1><p><a href="http://www.iamaddy.net/2015/02/ios-javascript-date/" target="_blank" rel="noopener">http://www.iamaddy.net/2015/02/ios-javascript-date/</a></p>
<h1 id="优化移动端window-onscroll的执行频率方案"><a href="#优化移动端window-onscroll的执行频率方案" class="headerlink" title="优化移动端window.onscroll的执行频率方案"></a>优化移动端window.onscroll的执行频率方案</h1><p><a href="https://zhuanlan.zhihu.com/p/32061260" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/32061260</a></p>
<h1 id="移动端输入框填坑系列"><a href="#移动端输入框填坑系列" class="headerlink" title="移动端输入框填坑系列"></a>移动端输入框填坑系列</h1><p><a href="http://www.alloyteam.com/2017/03/moves-the-input-box-fill-series-a/" target="_blank" rel="noopener">http://www.alloyteam.com/2017/03/moves-the-input-box-fill-series-a/</a></p>
<h1 id="nodeJS踩坑-记本地地址127-0-0-1与0-0-0-0的区别"><a href="#nodeJS踩坑-记本地地址127-0-0-1与0-0-0-0的区别" class="headerlink" title="nodeJS踩坑-记本地地址127.0.0.1与0.0.0.0的区别"></a>nodeJS踩坑-记本地地址127.0.0.1与0.0.0.0的区别</h1><p><a href="https://www.imooc.com/article/7581" target="_blank" rel="noopener">https://www.imooc.com/article/7581</a></p>
<h1 id="H5与APP混合开发遇到的问题总结"><a href="#H5与APP混合开发遇到的问题总结" class="headerlink" title="H5与APP混合开发遇到的问题总结"></a>H5与APP混合开发遇到的问题总结</h1><p><a href="https://juejin.im/post/5aa8b00c51882555627cfa0e" target="_blank" rel="noopener">https://juejin.im/post/5aa8b00c51882555627cfa0e</a></p>
<h1 id="decodeURIComponent报错的坑"><a href="#decodeURIComponent报错的坑" class="headerlink" title="decodeURIComponent报错的坑"></a>decodeURIComponent报错的坑</h1><p><a href="https://cnodejs.org/topic/4fd6b7ba839e1e581407aac8" target="_blank" rel="noopener">https://cnodejs.org/topic/4fd6b7ba839e1e581407aac8</a> <a href="https://stackoverflow.com/questions/28063750/decodeuricomponent-throwing-an-error-uri-malformed" target="_blank" rel="noopener">https://stackoverflow.com/questions/28063750/decodeuricomponent-throwing-an-error-uri-malformed</a></p>
<h1 id="webkit-box-orient不见了，-webkit-和-autoprefixer-的坑"><a href="#webkit-box-orient不见了，-webkit-和-autoprefixer-的坑" class="headerlink" title="-webkit-box-orient不见了， webkit 和 autoprefixer 的坑"></a>-webkit-box-orient不见了， webkit 和 autoprefixer 的坑</h1><p><a href="https://blog.csdn.net/sinat_24070543/article/details/79755285" target="_blank" rel="noopener">https://blog.csdn.net/sinat_24070543/article/details/79755285</a></p>
<h1 id="移动端弹框后禁止背景屏幕滑动的解决方案"><a href="#移动端弹框后禁止背景屏幕滑动的解决方案" class="headerlink" title="移动端弹框后禁止背景屏幕滑动的解决方案"></a>移动端弹框后禁止背景屏幕滑动的解决方案</h1><p><a href="https://dancon.gitbooks.io/git-books/content/js/essay/dialog\_forbid\_back_scroll.html" target="_blank" rel="noopener">https://dancon.gitbooks.io/git-books/content/js/essay/dialog\_forbid\_back_scroll.html</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="//merrier.wang" target="_blank">Merrier说</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/20170628/git-configuration-alias.html" class="pre-post btn btn-default" title="Git配置别名">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Git配置别名</span>
        </a>
    
    
        <a href="/20170522/zepto-design-and-source-code-analysis.html" class="next-post btn btn-default" title="Zepto设计和源码分析">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">Zepto设计和源码分析</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://merrier.disqus.com/count.js" async></script>


<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'http://merrier.wang/20170616/pits-stepped-on-in-actual-combat.html';
    this.page.identifier = '20170616/pits-stepped-on-in-actual-combat.html';
    this.page.title = '实战中踩到的坑';
  };
  var d = document, s = d.createElement('script');
  s.src = 'https://merrier.disqus.com/embed.js';
  s.setAttribute('data-timestamp', '' + +new Date());
  (d.head || d.body).appendChild(s);
</script>




    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#变量与选择器"><span class="toc-text">变量与选择器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#video无法播放"><span class="toc-text">video无法播放</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-video和audio都有跨域问题"><span class="toc-text">1.video和audio都有跨域问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-video中的src地址有猫腻"><span class="toc-text">2.video中的src地址有猫腻</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#django模板中的数组索引"><span class="toc-text">django模板中的数组索引</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#jsonp不是万能的"><span class="toc-text">jsonp不是万能的</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#移动端慎用tap"><span class="toc-text">移动端慎用tap</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ant-design-select问题"><span class="toc-text">ant design select问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Object属性遍历问题"><span class="toc-text">Object属性遍历问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOS-Javascript-Date的坑"><span class="toc-text">IOS Javascript Date的坑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#优化移动端window-onscroll的执行频率方案"><span class="toc-text">优化移动端window.onscroll的执行频率方案</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#移动端输入框填坑系列"><span class="toc-text">移动端输入框填坑系列</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nodeJS踩坑-记本地地址127-0-0-1与0-0-0-0的区别"><span class="toc-text">nodeJS踩坑-记本地地址127.0.0.1与0.0.0.0的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#H5与APP混合开发遇到的问题总结"><span class="toc-text">H5与APP混合开发遇到的问题总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#decodeURIComponent报错的坑"><span class="toc-text">decodeURIComponent报错的坑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webkit-box-orient不见了，-webkit-和-autoprefixer-的坑"><span class="toc-text">-webkit-box-orient不见了， webkit 和 autoprefixer 的坑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#移动端弹框后禁止背景屏幕滑动的解决方案"><span class="toc-text">移动端弹框后禁止背景屏幕滑动的解决方案</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>






    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>